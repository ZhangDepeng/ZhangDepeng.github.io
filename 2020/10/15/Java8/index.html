<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="keywords" content="hexo,ä¸ªäººåšå®¢,blog" />
  <meta name="description" content="ä¸ªäººåšå®¢" />
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="dns-prefetch" href="https://busuanzi.ibruce.info">
  <link rel="dns-prefetch" href="https://at.alicdn.com">
  
  
  
  <link rel="stylesheet" type="text/css" href="/./style/main.css">
	<link rel="shortcut icon" href="/img/favicon.ico" title="Favicon">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
	<title>Java8æ–°ç‰¹æ€§</title>
  
  
<meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="ontheway" type="application/atom+xml">
</head>
<body>
  <canvas id="pattern-placeholder" height="230"></canvas>
<div class="navbar-header">
  <a class="blog-title" href="/">ontheway</a>
  <a class="face-img" href="/">
    <img src="/img/logo.jpg">
  </a>
</div>
<main>
  <div class="article-title">
    
  
  <h1 class="title">
    Java8æ–°ç‰¹æ€§
  </h1>
  


    <ul class="article-info">
      <li>
        å‘å¸ƒ
        <time datetime="2020-10-15T03:33:01.000Z" itemprop="datePublished">2020-10-15</time>
      </li>
      <li>
        
    æ›´æ–° <time datetime="2020-10-09T08:41:15.000Z" itemprop="dateUpdated">2020-10-09</time>

      </li>
      <li id="busuanzi_container_page_pv">
        é˜…è¯» <span id="busuanzi_value_page_pv"></span>
      </li>
    </ul>
  </div>
  <div class="container">
    <div class="article">
      <div class="content">
        
        <div class="overdue-remind">
          æœ¬æ–‡æœ€åæ›´æ–°äº$dayå¤©å‰ï¼Œæ–‡ä¸­æ‰€æè¿°çš„ä¿¡æ¯å¯èƒ½å·²å‘ç”Ÿæ”¹å˜ã€‚
        </div>
        
        <blockquote>
<p>Pain is temporary,quitting lasts forever </p>
</blockquote>
<h3 id="Java8-æ–°ç‰¹æ€§"><a href="#Java8-æ–°ç‰¹æ€§" class="headerlink" title="Java8    æ–°ç‰¹æ€§"></a>Java8    æ–°ç‰¹æ€§</h3><h4 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h4><ul>
<li><p>Lambdaè¡¨è¾¾å¼</p>
<p>å…è®¸æŠŠå‡½æ•°ä½œä¸ºä¸€ä¸ªæ–¹æ³•çš„å‚æ•°ä¼ é€’åˆ°æ–¹æ³•ä¸­ã€‚</p>
</li>
<li><p>å‡½æ•°å¼æ¥å£</p>
<p>æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œä½†æ˜¯å¯ä»¥æœ‰å¤šä¸ªéæŠ½è±¡æ–¹æ³•çš„æ¥å£ã€‚</p>
</li>
<li><p>é»˜è®¤æ–¹æ³•</p>
<p>æ¥å£å¯ä»¥æœ‰å®ç°æ–¹æ³•ï¼Œè€Œä¸”ä¸éœ€è¦å®ç°ç±»å»å®ç°å…¶æ–¹æ³•</p>
</li>
<li><p>æ–¹æ³•å¼•ç”¨</p>
<p>å¯ä»¥ç›´æ¥å¼•ç”¨å·²æœ‰çš„Javaç±»æˆ–å¯¹è±¡ï¼ˆå®ä¾‹ï¼‰çš„æ–¹æ³•æˆ–æ„é€ å™¨</p>
</li>
<li><p>StreamAPI</p>
<p>å¯¹é›†åˆï¼ˆCollectionï¼‰å¯¹è±¡åŠŸèƒ½çš„å¢å¼º</p>
</li>
<li><p>Date Time API   </p>
<p>åŠ å¼ºå¯¹æ—¥æœŸä¸æ—¶é—´çš„å¤„ç†</p>
</li>
<li><p>Optionalç±»</p>
<p>è§£å†³ç©ºæŒ‡é’ˆå¼‚å¸¸</p>
</li>
</ul>
<h4 id="Lambdaè¡¨è¾¾å¼"><a href="#Lambdaè¡¨è¾¾å¼" class="headerlink" title="Lambdaè¡¨è¾¾å¼"></a>Lambdaè¡¨è¾¾å¼</h4><p>Lambdaè¡¨è¾¾å¼ï¼Œä¹Ÿå¯ç§°ä¸ºé—­åŒ…ã€‚å…è®¸æŠŠå‡½æ•°ä½œä¸ºæ–¹æ³•çš„å‚æ•°ä¼ é€’åˆ°æ–¹æ³•ä¸­ã€‚lambdaç”±é€—å·åˆ†éš”çš„å‚æ•°åˆ—è¡¨ã€-&gt;ç¬¦å·ã€å‡½æ•°ä½“ä¸‰éƒ¨åˆ†ç»„æˆã€‚</p>
<p>è¯­æ³•ï¼š(parameters)-&gt;expressionæˆ–(parameters)-&gt;{statements;}</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">PersonCallBack</span> </span>&#123;    <span class="function"><span class="keyword">void</span> <span class="title">callback</span><span class="params">()</span></span>;     &#125; <span class="comment">// å®šä¹‰æ¥å£</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">(String name, PersonCallBack callBack)</span> </span>&#123;    </span><br><span class="line">    System.out.println(name);    </span><br><span class="line">    callBack.callback();   </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;    </span><br><span class="line">    <span class="keyword">new</span> Person().test(<span class="string">"å¼ ä¸‰"</span>, () -&gt; &#123;        </span><br><span class="line">        System.out.println(<span class="string">"18"</span>);    </span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>éœ€è¦å£°æ˜PersonCallBackæ¥å£ä¸º<strong>å‡½æ•°å¼æ¥å£</strong>ã€‚å³æ¥å£ä¸­æœ‰ä¸”ä»…æœ‰å”¯ä¸€çš„ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ã€‚lambdaè¡¨è¾¾å¼å…¶å®å°±å®ç°æ¥å£å¹¶ä¸”å®ç°äº†æ¥å£ä¸­çš„å”¯ä¸€çš„æ–¹æ³•ã€‚</p>
<ul>
<li>å¯é€‰ç±»å‹å£°æ˜ï¼šä¸éœ€è¦å£°æ˜å‚æ•°ç±»å‹ï¼Œç¼–è¯‘å™¨å¯ä»¥ç»Ÿä¸€è¯†åˆ«å‚æ•°å€¼ã€‚</li>
<li>å¯é€‰çš„å‚æ•°åœ†æ‹¬å·ï¼šä¸€ä¸ªå‚æ•°æ— éœ€å®šä¹‰åœ†æ‹¬å·ï¼Œä½†å¤šä¸ªå‚æ•°éœ€è¦å®šä¹‰åœ†æ‹¬å·ã€‚</li>
<li>å¯é€‰çš„å¤§æ‹¬å·ï¼šå¦‚æœä¸»ä½“åŒ…å«äº†ä¸€ä¸ªè¯­å¥ï¼Œå°±ä¸éœ€è¦ä½¿ç”¨å¤§æ‹¬å·</li>
<li>å¯é€‰çš„è¿”å›å…³é”®å­—ï¼šå¦‚æœä¸»ä½“åªæœ‰ä¸€ä¸ªè¡¨è¾¾å¼è¿”å›å€¼åˆ™ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è¿”å›å€¼ï¼Œä½¿ç”¨å¤§æ‹¬å·éœ€è¦æŒ‡å®šè¡¨è¾¾å¼è¿”å›ä¸€ä¸ªæ•°å€¼ã€‚</li>
</ul>
<p>æ³¨æ„ï¼šlambda è¡¨è¾¾å¼åªèƒ½å¼•ç”¨æ ‡è®°äº† final çš„å¤–å±‚å±€éƒ¨å˜é‡ï¼Œè¿™å°±æ˜¯è¯´ä¸èƒ½åœ¨ lambda å†…éƒ¨ä¿®æ”¹å®šä¹‰åœ¨åŸŸå¤–çš„å±€éƒ¨å˜é‡ï¼Œå¦åˆ™ä¼šç¼–è¯‘é”™è¯¯ã€‚</p>
<h4 id="å‡½æ•°å¼æ¥å£"><a href="#å‡½æ•°å¼æ¥å£" class="headerlink" title="å‡½æ•°å¼æ¥å£"></a>å‡½æ•°å¼æ¥å£</h4><p>å‡½æ•°å¼æ¥å£(Functional Interface)å°±æ˜¯ä¸€ä¸ªæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œä½†æ˜¯å¯ä»¥ç”±å¤šä¸ªéæŠ½è±¡æ–¹æ³•çš„æ¥å£ã€‚@FunctionalInterfaceå¯ä»¥æ ¡éªŒå‡½æ•°å¼æ¥å£ã€‚</p>
<p>åœ¨Java8ä¸­æ–°å¢äº†å¾ˆå¤šå‡½æ•°å¼æ¥å£ã€‚åœ¨java.util.functionåŒ…ä¸‹ã€‚ä½¿æˆ‘ä»¬ä½¿ç”¨lambdaæ¥å£æ›´åŠ æ–¹ä¾¿ã€‚ä¸‹é¢åˆ—ä¸¾å¸¸ç”¨æ¥å£ã€‚</p>
<table>
<thead>
<tr>
<th align="center">æ¥å£</th>
<th align="center">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Supplier</td>
<td align="center">æ— å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªç»“æœ</td>
</tr>
<tr>
<td align="center">Function</td>
<td align="center">æ¥å—ä¸€ä¸ªè¾“å…¥å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªç»“æœ</td>
</tr>
<tr>
<td align="center">Consumer</td>
<td align="center">æ¥å—ä¸€ä¸ªè¾“å…¥å‚æ•°ï¼Œæ— è¿”å›ç»“æœ</td>
</tr>
</tbody></table>
<h4 id="é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•"><a href="#é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•" class="headerlink" title="é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•"></a>é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•</h4><p>æ¥å£ä¸­ä½¿ç”¨defaultä¿®é¥°çš„æ–¹æ³•ä¸ºé»˜è®¤æ–¹æ³•ã€‚ç”¨staticä¿®é¥°çš„æ–¹æ³•ä¸ºé™æ€æ–¹æ³•ã€‚</p>
<p>é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•å°±æ˜¯æ¥å£å¯ä»¥æœ‰å®ç°æ–¹æ³•ï¼Œè€Œä¸”ä¸éœ€è¦å®ç°ç±»å»å®ç°å…¶æ–¹æ³•ã€‚å®ç°ç±»ä¹Ÿå¯ä»¥å®ç°æ–¹æ³•è¿›è¡Œé‡å†™ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆè¦æœ‰è¿™ä¸ªç‰¹æ€§ï¼Ÿ</strong></p>
<p>é¦–å…ˆï¼Œä¹‹å‰çš„æ¥å£æ˜¯ä¸ªåŒåˆƒå‰‘ï¼Œå¥½å¤„æ˜¯é¢å‘æŠ½è±¡è€Œä¸æ˜¯é¢å‘å…·ä½“ç¼–ç¨‹ï¼Œç¼ºé™·æ˜¯ï¼Œå½“éœ€è¦ä¿®æ”¹æ¥å£æ—¶å€™ï¼Œéœ€è¦ä¿®æ”¹å…¨éƒ¨å®ç°è¯¥æ¥å£çš„ç±»ï¼Œç›®å‰çš„ java 8 ä¹‹å‰çš„é›†åˆæ¡†æ¶æ²¡æœ‰ foreach æ–¹æ³•ï¼Œé€šå¸¸èƒ½æƒ³åˆ°çš„è§£å†³åŠæ³•æ˜¯åœ¨JDKé‡Œç»™ç›¸å…³çš„æ¥å£æ·»åŠ æ–°çš„æ–¹æ³•åŠå®ç°ã€‚ç„¶è€Œï¼Œå¯¹äºå·²ç»å‘å¸ƒçš„ç‰ˆæœ¬ï¼Œæ˜¯æ²¡æ³•åœ¨ç»™æ¥å£æ·»åŠ æ–°æ–¹æ³•çš„åŒæ—¶ä¸å½±å“å·²æœ‰çš„å®ç°ã€‚æ‰€ä»¥å¼•è¿›çš„é»˜è®¤æ–¹æ³•ã€‚ä»–ä»¬çš„ç›®çš„æ˜¯ä¸ºäº†è§£å†³æ¥å£çš„ä¿®æ”¹ä¸ç°æœ‰çš„å®ç°ä¸å…¼å®¹çš„é—®é¢˜ã€‚</p>
<h4 id="æ–¹æ³•å¼•ç”¨"><a href="#æ–¹æ³•å¼•ç”¨" class="headerlink" title="æ–¹æ³•å¼•ç”¨"></a>æ–¹æ³•å¼•ç”¨</h4><p>æ–¹æ³•å¼•ç”¨é€šè¿‡æ–¹æ³•çš„åå­—æ¥æŒ‡å‘ä¸€ä¸ªæ–¹æ³•ï¼Œæ–¹æ³•å¼•ç”¨ä½¿ç”¨ä¸€å¯¹å†’å·::ã€‚</p>
<p>æ–¹æ³•çš„å‚æ•°åˆ—è¡¨å¿…é¡»ä¸å‡½æ•°å¼æ¥å£çš„æŠ½è±¡æ–¹æ³•çš„å‚æ•°åˆ—è¡¨ä¿æŒä¸€è‡´ï¼Œè¿”å›å€¼ä¸åšè¦æ±‚ã€‚</p>
<table>
<thead>
<tr>
<th align="center">å¼•ç”¨ç±»å‹</th>
<th align="center">ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td align="center">å¼•ç”¨é™æ€æ–¹æ³•</td>
<td align="center">String::valueOf</td>
</tr>
<tr>
<td align="center">å¼•ç”¨æŸä¸ªå¯¹è±¡çš„æ–¹æ³•</td>
<td align="center">list::add</td>
</tr>
<tr>
<td align="center">å¼•ç”¨æŸä¸ªç±»çš„æ–¹æ³•</td>
<td align="center">String::length</td>
</tr>
<tr>
<td align="center">å¼•ç”¨æ„é€ æ–¹æ³•</td>
<td align="center">HashMap::new</td>
</tr>
<tr>
<td align="center">å¼•ç”¨æ•°ç»„</td>
<td align="center">int[]::new</td>
</tr>
</tbody></table>
<h4 id="Optionaléç©ºåˆ¤æ–­"><a href="#Optionaléç©ºåˆ¤æ–­" class="headerlink" title="Optionaléç©ºåˆ¤æ–­"></a>Optionaléç©ºåˆ¤æ–­</h4><p>å¼•å…¥Optionalé¿å…NullPointerExceptionå’Œå±‚å±‚åˆ¤ç©ºçš„æ“ä½œï¼Œä»£ç æ›´ç®€æ´</p>
<p>åˆ›å»ºOptionalå¯¹è±¡çš„å‡ ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li>Optional.of(T value)ï¼Œè¿”å›ä¸€ä¸ªOptionalå¯¹è±¡ï¼Œvalueä¸èƒ½ä¸ºç©ºï¼Œå¦åˆ™ä¼šç©ºæŒ‡é’ˆå¼‚å¸¸</li>
<li>Optional.ofNullable(T value)ï¼Œè¿”å›ä¸€ä¸ªOptionalå¯¹è±¡ï¼Œvalueå¯ä»¥ä¸ºç©º</li>
<li>Optional.empty()ï¼Œä»£è¡¨ç©º</li>
<li>isPresent() : åˆ¤æ–­æ˜¯å¦åŒ…å«å€¼</li>
<li>orElse(T t) :  å¦‚æœè°ƒç”¨å¯¹è±¡åŒ…å«å€¼ï¼Œè¿”å›è¯¥å€¼ï¼Œå¦åˆ™è¿”å›t</li>
<li>orElseGet(Supplier s) :å¦‚æœè°ƒç”¨å¯¹è±¡åŒ…å«å€¼ï¼Œè¿”å›è¯¥å€¼ï¼Œå¦åˆ™è¿”å› s è·å–çš„å€¼</li>
<li>map(Function f): å¦‚æœæœ‰å€¼å¯¹å…¶å¤„ç†ï¼Œå¹¶è¿”å›å¤„ç†åçš„Optionalï¼Œå¦åˆ™è¿”å› Optional.empty()</li>
<li>flatMap(Function mapper):ä¸ map ç±»ä¼¼ï¼Œè¦æ±‚è¿”å›å€¼å¿…é¡»æ˜¯Optional</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»¥å‰ä¸ºäº†é¿å…NPEï¼Œéœ€è¦å±‚å±‚åˆ¤ç©º</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getColor</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (user != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (user.getCar() != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (user.getCar().getColor() != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> user.getCar().getColor();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"red"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¼•å…¥Optionalå</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getColor</span><span class="params">(Optional&lt;User&gt; optUser)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> optUser.map(User::getCar)</span><br><span class="line">            .map(Car::getColor)</span><br><span class="line">            .orElse(<span class="string">"red"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Stream-API"><a href="#Stream-API" class="headerlink" title="Stream API"></a>Stream API</h4><p>Streamæ˜¯å¯¹é›†åˆï¼ˆCollectionï¼‰å¯¹è±¡åŠŸèƒ½çš„å¢å¼ºï¼Œå®ƒä¸“æ³¨äºå¯¹é›†åˆå¯¹è±¡è¿›è¡Œå„ç§éå¸¸ä¾¿åˆ©ã€é«˜æ•ˆçš„èšåˆæ“ä½œï¼Œæˆ–è€…å¤§æ‰¹é‡æ•°æ®æ“ä½œã€‚Stream APIå¯ä»¥å€ŸåŠ©äºæ–°å‡ºç°çš„Lambdaè¡¨è¾¾å¼ï¼Œæå¤§çš„æé«˜ç¼–ç¨‹æ•ˆç‡å’Œç¨‹åºçš„å¯è¯»æ€§ã€‚</p>
<p><strong>streamæ„æˆ</strong></p>
<p>è·å–ä¸€ä¸ªæ•°æ®æºï¼ˆsourceï¼‰-&gt;æ•°æ®è½¬æ¢-&gt;æ‰§è¡Œæ“ä½œè·å–æƒ³è¦çš„ç»“æœï¼Œæ¯æ¬¡è½¬æ¢åŸæœ‰Streamå¯¹è±¡ä¸æ”¹å˜ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„Streamå¯¹è±¡ï¼ˆå¯ä»¥æœ‰å¤šæ¬¡è½¬æ¢ï¼‰ã€‚</p>
<p><strong>streamçš„æ“ä½œç±»å‹</strong></p>
<ul>
<li><p>ä¸­é—´æ“ä½œ</p>
<p>ä¸€ä¸ªæµåé¢å¯ä»¥è·Ÿéš0ä¸ªæˆ–å¤šä¸ªä¸­é—´æ“ä½œã€‚å…¶ç›®çš„æ˜¯æ‰“å¼€æµï¼Œåšå‡ºæŸç§ç¨‹åº¦çš„æ•°æ®æ˜ å°„ã€è¿‡æ»¤ã€ç„¶åè¿”å›ä¸€ä¸ªæ–°çš„æµï¼Œäº¤ç»™ä¸‹ä¸€ä¸ªæ“ä½œä½¿ç”¨ã€‚è¿™ç±»æ“ä½œéƒ½æ˜¯æ‡’æƒ°çš„ï¼Œä»…ä»…è°ƒç”¨åˆ°è¿™ç±»æ–¹æ³•ï¼Œå¹¶æ²¡æœ‰çœŸæ­£å¼€å§‹æµçš„éå†ã€‚</p>
</li>
<li><p>ç»ˆæ­¢æ“ä½œ</p>
<p>ä¸€ä¸ªæµåªèƒ½æœ‰ä¸€ä¸ªç»ˆæ­¢æ“ä½œï¼Œå½“è¿™ä¸ªæ“ä½œæ‰§è¡Œåï¼Œæµå°±è¢«ä½¿ ç”¨â€œå…‰â€äº†ï¼Œæ— æ³•å†è¢«æ“ä½œã€‚ç»ˆæ­¢æ“ä½œçš„æ‰§è¡Œï¼Œæ‰ä¼šçœŸæ­£å¼€å§‹æµçš„éå†ï¼Œå¹¶ä¸”ä¼šç”Ÿæˆä¸€ä¸ªç»“æœã€‚</p>
</li>
</ul>
<p><strong>streamçš„ä½¿ç”¨</strong></p>
<ul>
<li><p>è·å–streamæµ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Collection.stream(); </span><br><span class="line">Collection.parallelStream();</span><br><span class="line">Arrays.stream();</span><br><span class="line">stream.of(T t);</span><br><span class="line"></span><br><span class="line">List list = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">Stream stream = list.stream();</span><br><span class="line">Stream stream = list.parallelStream();</span><br><span class="line">Integer[] nums = <span class="keyword">new</span> Integer[] &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">Stream stream = Arrays.stream(nums);</span><br><span class="line">Stream stream = Stream.of(nums);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯¹äºåŸºæœ¬æ•°å€¼å‹ï¼Œç›®å‰æä¾›äº†ä¸‰ç§å¯¹åº”çš„åŒ…è£…ç±»å‹ Stream</span></span><br><span class="line">IntStream,LongStream,DoubleStream</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><strong>Map/flatMap(æ˜ å°„)</strong></p>
<p>  æŠŠ input Stream çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œæ˜ å°„æˆ output Stream çš„å¦å¤–ä¸€ä¸ªå…ƒç´ ã€‚map ç”Ÿæˆçš„æ˜¯ä¸ª 1:1 æ˜ å°„ã€‚ï¬‚atMapæ˜¯ä¸€å¯¹å¤šæ˜ å°„å…³ç³»çš„ã€‚  </p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Collection&lt;Student&gt; students = Arrays.asList(        </span><br><span class="line">    <span class="keyword">new</span> Student(<span class="number">1</span>, Grade.FIRST, <span class="number">60</span>),        </span><br><span class="line">    <span class="keyword">new</span> Student(<span class="number">2</span>, Grade.SECOND, <span class="number">80</span>),        </span><br><span class="line">    <span class="keyword">new</span> Student(<span class="number">3</span>, Grade.FIRST, <span class="number">100</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>  <strong>map</strong></p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">students.stream().map(Student::getScore).collect(Collectors.toList());</span><br></pre></td></tr></table></figure>

<p>  å¯ä»¥è·å–åˆ°idæ•°ç»„ [60, 80, 100]</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">students.stream().map(item -&gt; item.getId() + <span class="string">" "</span> + item.getScore()).collect(Collectors.joining(<span class="string">","</span>));</span><br></pre></td></tr></table></figure>

<p>  è¿”å›å€¼ä¸º1 60,2 80,3 100</p>
<p>  <strong>flatMap</strong></p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;List&lt;Integer&gt;&gt; flatMapStream = Stream.of(        </span><br><span class="line">      Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>),        </span><br><span class="line">      Arrays.asList(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>),        </span><br><span class="line">      Arrays.asList(<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>)</span><br><span class="line">  );</span><br></pre></td></tr></table></figure>

<p>  å…ˆæ‰§è¡Œmapï¼Œç»“æœä¸º3 3 4ï¼Œä¸ºæµå†…éƒ¨listçš„é•¿åº¦</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flatMapStream.map(List::size).forEach(item -&gt; System.out.print(item + <span class="string">" "</span>));</span><br></pre></td></tr></table></figure>

<p>  åœ¨æ‰§è¡ŒfloatMap,ç»“æœä¸º1 2 3 4 5 6 7 8 9 10</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flatMapStream.flatMap(Collection::stream).forEach(item -&gt; System.out.print(item + <span class="string">" "</span>));</span><br></pre></td></tr></table></figure>

<p>  <strong>Mapæ˜¯æŠŠStreamä¸­çš„æ¯ä¸ªListå½“åšç®¡é“ä¸­çš„å…ƒç´ ã€‚flatMapæ˜¯æŠŠStreamä¸­çš„æ¯ä¸ªListçš„å­å…ƒç´ å½“åšç®¡é“ä¸­çš„å…ƒç´ </strong></p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">flatMapStream.map(List::size).forEach(item -&gt; System.out.print(item + <span class="string">" "</span>));</span><br><span class="line">  flatMapStream.flatMap(Collection::stream).forEach(item -&gt; System.out.print(item + <span class="string">" "</span>));</span><br></pre></td></tr></table></figure>

<p>  å½“ä»£ç ä¸­åŒæ—¶å‡ºç°å¯¹ä¸€ä¸ªæµçš„æ“ä½œæ—¶ï¼Œä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜ï¼Ÿ<br>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.lang.IllegalStateException: stream has already been operated upon or closed</span><br></pre></td></tr></table></figure><br>  <strong>æ¯æ¬¡åˆ›å»ºçš„streamåªèƒ½ä½¿ç”¨ä¸€æ¬¡</strong>  </p>
<p>  <strong>Mapã€flatMapçš„åŒºåˆ«</strong></p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">map(Function&lt;? <span class="keyword">super</span> T, ? extends R&gt; mapper)</span><br><span class="line">flatMap(Function&lt;? <span class="keyword">super</span> T, ? extends Stream&lt;? extends R&gt;&gt; mapper); </span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Function</span>&lt;<span class="title">T</span>, <span class="title">R</span>&gt; </span>&#123;<span class="function">R <span class="title">apply</span><span class="params">(T t)</span></span>;&#125;</span><br></pre></td></tr></table></figure>

<p>  ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ç¬¬äºŒä¸ªä¸ä¸€æ ·ï¼ŒflatMapè¦æ±‚è¿”å›çš„æ˜¯ç»§æ‰¿streamç±»å‹çš„ç±»å‹ã€‚ä¹Ÿå°±æ˜¯è¯´å‡½æ•°ä½“åªèƒ½è¿”å›ä¸€ä¸ªstreamç±»å‹çš„æµã€‚</p>
<p><strong>Reduce</strong></p>
<p>  æŠŠ Stream å…ƒç´ ç»„åˆèµ·æ¥ã€‚å®ƒæä¾›ä¸€ä¸ªèµ·å§‹å€¼ï¼Œç„¶åä¾ç…§è¿ç®—è§„åˆ™å’ŒStreamçš„æ¯ä¸€ä¸ªå…ƒç´ ç»„åˆã€‚ä»è¿™ä¸ªæ„ä¹‰ä¸Šè¯´ï¼Œå­—ç¬¦ä¸²æ‹¼æ¥ã€æ•°å€¼çš„ sumã€minã€maxã€average éƒ½æ˜¯ç‰¹æ®Šçš„ reduceã€‚  </p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Integer[] nums = <span class="keyword">new</span> Integer[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;;</span><br><span class="line">Integer sum = Stream.of(nums).reduce(<span class="number">0</span>, (n1, n2) -&gt; n1 + n2);</span><br></pre></td></tr></table></figure>

<p>  ç¬¬ä¸€ä¸ªä¸ºèµ·å§‹å€¼ï¼Œç¬¬äºŒä¸ªä¸ºè¿ç®—è§„åˆ™ã€‚æ²¡æœ‰èµ·å§‹å€¼æ—¶è¿”å›çš„æ˜¯Optionalã€‚éœ€è¦get()è·å–ã€‚</p>
<p><strong>filter(è¿‡æ»¤)</strong></p>
<p>  ç”¨äºé€šè¿‡è®¾ç½®çš„æ¡ä»¶è¿‡æ»¤å‡ºå…ƒç´ ã€‚  </p>
<p>  ä¼ é€’çš„æ˜¯interface Predicateï¼Œè¿”å›å€¼ä¸ºboolean test(T t)ï¼Œæ˜¯å¦æ»¡è¶³</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Integer[] nums = <span class="keyword">new</span> Integer[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;;</span><br><span class="line">Stream.of(nums).filter(item -&gt; item &gt; <span class="number">3</span>).collect(Collectors.toList());</span><br></pre></td></tr></table></figure>

<p>  è¿”å›å€¼ä¸º[4, 5, 6]ã€‚</p>
<p><strong>forEachï¼ˆå¾ªç¯ï¼‰ç»ˆæ­¢æ“ä½œ</strong></p>
<p>  è¿­ä»£æµä¸­çš„æ¯ä¸ªæ•°æ®ã€‚forEachæ˜¯ä¸€ä¸ªç»ˆæ­¢æ“ä½œã€‚æ— æ³•å¯¹ä¸€ä¸ªæµè¿›è¡Œä¸¤æ¬¡ç»ˆæ­¢æ“ä½œ  </p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Integer[] nums &#x3D; new Integer[]&#123;1,2,3,4,5,6&#125;;</span><br><span class="line">Stream.of(nums).filter(item -&gt; item &gt; 3).forEach(System.out::print);</span><br></pre></td></tr></table></figure>

<p>  è¿”å›å€¼ä¸º456  </p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">forEach</span><span class="params">(Consumer&lt;? <span class="keyword">super</span> T&gt; action)</span></span>;</span><br></pre></td></tr></table></figure>

<p>  è¿”å›å€¼ä¸ºvoidï¼Œä¸ä¼šè¿”å›æµï¼Œç»ˆæ­¢æ“ä½œ</p>
<p><strong>peekï¼ˆå¾ªç¯ï¼‰ä¸­é—´æ“ä½œ</strong></p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Integer[] nums = <span class="keyword">new</span> Integer[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;;</span><br><span class="line">Stream.of(nums).filter(item -&gt; item &gt; <span class="number">3</span>)        </span><br><span class="line">    .peek(item -&gt; System.out.print(item + <span class="number">1</span>))        </span><br><span class="line">    .peek(System.out::print)        </span><br><span class="line">    .reduce(<span class="number">0</span>, Integer::sum);</span><br></pre></td></tr></table></figure>

<p>  å¯ä»¥å¤šæ¬¡peekæ“ä½œã€‚æ³¨æ„ï¼šç»“æœä¸º546576ã€‚ è¿™ä¸ªç»“æœä¸å¥½è§£é‡Šï¼Œè‡ªå·±ä½“ä¼šå§ã€‚</p>
<p>  ç¬¬ä¸€æ¬¡çš„peekæ“ä½œä¿®æ”¹æ•°æ®ä¸ä¼šå¯¹ç¬¬äºŒæ¬¡çš„peekæ•°æ®é€ æˆå½±å“ã€‚å› ä¸ºpeekä¼ é€’çš„æ˜¯Consumerç±»å‹çš„å‡½æ•°ä½“ï¼Œåªèƒ½æ¶ˆè´¹ï¼Œä¸èƒ½è¿”å›</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Stream&lt;T&gt; <span class="title">peek</span><span class="params">(Consumer&lt;? <span class="keyword">super</span> T&gt; action)</span></span>;</span><br></pre></td></tr></table></figure>

<p>  ä¼šè¿”å›æµ</p>
<p><strong>Limit/skip</strong></p>
<p>  limit è¿”å› Stream çš„å‰é¢ n ä¸ªå…ƒç´ ï¼›skip åˆ™æ˜¯è·³è¿‡å‰ n ä¸ªå…ƒç´   </p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Integer[] nums = <span class="keyword">new</span> Integer[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;;</span><br><span class="line">Stream.of(nums).limit(<span class="number">4</span>).skip(<span class="number">2</span>).forEach(System.out::print);</span><br></pre></td></tr></table></figure>

<p>  å»å‰å››ä¸ªå…ƒç´ å¹¶è·³è¿‡å‰ä¸¤ä¸ªã€‚è¿”å›å€¼ä¸º34</p>
<p><strong>sortedï¼ˆæ’åºï¼‰</strong></p>
<p>  å¯¹ Stream çš„æ’åºé€šè¿‡ sorted è¿›è¡Œï¼Œå®ƒæ¯”æ•°ç»„çš„æ’åºæ›´å¼ºä¹‹å¤„åœ¨äºä½ å¯ä»¥é¦–å…ˆå¯¹ Stream è¿›è¡Œå„ç±» mapã€ï¬lterã€ limitã€skip ç”šè‡³ distinct æ¥å‡å°‘å…ƒç´ æ•°é‡åï¼Œå†æ’åºï¼Œè¿™èƒ½å¸®åŠ©ç¨‹åºæ˜æ˜¾ç¼©çŸ­æ‰§è¡Œæ—¶é—´  </p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Integer[] nums = <span class="keyword">new</span> Integer[]&#123;<span class="number">4</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">6</span>&#125;;</span><br><span class="line">Stream.of(nums).sorted((x, y)-&gt;x.compareTo(y)).forEach(System.out::print);</span><br></pre></td></tr></table></figure>

<p>  è¿”å›ç»“æœ2234456</p>
<p><strong>distinctï¼ˆå»é‡ï¼‰/min/max</strong></p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Integer[] nums = <span class="keyword">new</span> Integer[]&#123;<span class="number">4</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">6</span>&#125;;</span><br><span class="line">Stream.of(nums).distinct().forEach(System.out::print); <span class="comment">//42356</span></span><br><span class="line">System.out.println(Stream.of(nums).min(Comparator.naturalOrder()).get()); <span class="comment">// 2</span></span><br><span class="line">System.out.println(Stream.of(nums).max(Comparator.naturalOrder()).get()); <span class="comment">// 6</span></span><br></pre></td></tr></table></figure>

<p><strong>Match(åŒ¹é…)</strong></p>
<p>  Stream æœ‰ä¸‰ä¸ª match æ–¹æ³•ï¼Œä»è¯­ä¹‰ä¸Šè¯´ï¼š  </p>
<ul>
<li><p>allMatchï¼šStream ä¸­å…¨éƒ¨å…ƒç´ ç¬¦åˆä¼ å…¥çš„ predicateï¼Œè¿”å› true  </p>
</li>
<li><p>anyMatchï¼šStream ä¸­åªè¦æœ‰ä¸€ä¸ªå…ƒç´ ç¬¦åˆä¼ å…¥çš„ predicateï¼Œè¿”å› true  </p>
</li>
<li><p>noneMatchï¼šStream ä¸­æ²¡æœ‰ä¸€ä¸ªå…ƒç´ ç¬¦åˆä¼ å…¥çš„ predicateï¼Œè¿”å› true  </p>
<p>Integer[] nums = new Integer[]{4,2,2,4,3,5,6}; System.out.println(Stream.of(nums).anyMatch(x -&gt; x&gt;5)); // true</p>
</li>
</ul>
<p><strong>groupingBy/partitioningByï¼ˆåˆ†ç»„ï¼‰</strong></p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Collection&lt;Student&gt; students = Arrays.asList(        </span><br><span class="line">    <span class="keyword">new</span> Student(<span class="number">1</span>, Grade.FIRST, <span class="number">60</span>),        </span><br><span class="line">    <span class="keyword">new</span> Student(<span class="number">2</span>, Grade.SECOND, <span class="number">80</span>),        </span><br><span class="line">    <span class="keyword">new</span> Student(<span class="number">3</span>, Grade.FIRST, <span class="number">100</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>  <strong>groupingBy</strong></p>
<p>  å¯¹ä¸Šé¢çš„Studentè¿›è¡ŒæŒ‰å¹´çº§è¿›è¡Œåˆ†ç»„</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">students.stream().collect(Collectors.groupingBy(Student::getGrade))</span><br><span class="line">    .forEach((grade, list) -&gt;&#123;    </span><br><span class="line">        System.out.print(grade + <span class="string">" -&gt; "</span>);    </span><br><span class="line">        list.forEach(s-&gt; System.out.print(<span class="string">"&#123;"</span> + s.getId() + <span class="string">","</span> + s.getGrade() + <span class="string">","</span> + s.getScore() + <span class="string">"&#125;"</span>));    </span><br><span class="line">        System.out.println();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>  è¿”å›å€¼ä¸º SECOND -&gt; {2,SECOND,80} FIRST -&gt; {1,FIRST,60}{3,FIRST,100}  </p>
<p>  <strong>partitioningBy</strong></p>
<p>  å¯¹ä¸Šé¢çš„Studentè¿›è¡ŒæŒ‰æˆç»©è¿›è¡Œåˆ†ç»„</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">students.stream().collect(Collectors.partitioningBy(student -&gt; student.getScore() &gt; <span class="number">60</span>))</span><br><span class="line">    .forEach((grade, list) -&gt;&#123;    </span><br><span class="line">        System.out.print(grade + <span class="string">" -&gt; "</span>);    </span><br><span class="line">        list.forEach(s-&gt; System.out.print(<span class="string">"&#123;"</span> + s.getId() + <span class="string">","</span> + s.getGrade() + <span class="string">","</span> + s.getScore() + <span class="string">"&#125;"</span>));    </span><br><span class="line">        System.out.println();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>  è¿”å›å€¼ä¸º false -&gt; {1,FIRST,60} true -&gt; {2,SECOND,80}{3,FIRST,100}</p>
<p><strong>parallelStream</strong></p>
<p>  parallelStreamå…¶å®å°±æ˜¯ä¸€ä¸ªå¹¶è¡Œæ‰§è¡Œçš„æµ.å…¶åº•å±‚ä½¿ç”¨Fork/Joinæ¡†æ¶å®ç°ï¼Œå¯ä»¥æé«˜ä½ çš„å¤šçº¿ç¨‹ä»»åŠ¡çš„é€Ÿåº¦ã€‚  </p>
<p>  å¯ä»¥é€šè¿‡parallelï¼ˆï¼‰æŠŠstreamè½¬æ¢ä¸ºå¹¶è¡Œæ‰§è¡Œæµã€‚ä¹Ÿå¯ä»¥é€šè¿‡parallelStream()è·å–ã€‚</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Integer[] nums = <span class="keyword">new</span> Integer[] &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">6</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">5</span>&#125;;</span><br><span class="line">Arrays.stream(nums).forEach(System.out::print); <span class="comment">// 126321425</span></span><br><span class="line">System.out.println();</span><br><span class="line">Arrays.stream(nums).parallel().forEach(System.out::print); <span class="comment">// 122546321</span></span><br></pre></td></tr></table></figure>

<p> æ³¨æ„ï¼š</p>
<p> ä½¿ç”¨å¹¶è¡Œæ‰§è¡Œæµå¯ä»¥æé«˜å¤šçº¿ç¨‹ä»»åŠ¡é€Ÿåº¦ï¼Œä½†æ˜¯ä¹Ÿä¼šæ”¹å˜æ•°ç»„çš„éå†é¡ºåºï¼ˆä»…ä»ä¸Šé¢ä¾‹å­ä¸Šå‘ç°ï¼‰ã€‚</p>
<p> parallelStreamé€‚åˆæ²¡æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</p>
<p>parallelStreamåº•å±‚æ˜¯ä½¿ç”¨çš„ForkJoinã€‚è€ŒForkJoiné‡Œé¢çš„çº¿ç¨‹æ˜¯é€šè¿‡ForkJoinPoolæ¥è¿è¡Œçš„ï¼ŒJava 8ä¸º ForkJoinPoolæ·»åŠ äº†ä¸€ä¸ªé€šç”¨çº¿ç¨‹æ± ï¼Œè¿™ä¸ªçº¿ç¨‹æ± ç”¨æ¥å¤„ç†é‚£äº›æ²¡æœ‰è¢«æ˜¾å¼æäº¤åˆ°ä»»ä½•çº¿ç¨‹æ± çš„ä»»åŠ¡ã€‚å®ƒæ˜¯ ForkJoinPoolç±»å‹ä¸Šçš„ä¸€ä¸ªé™æ€å…ƒç´ ã€‚å®ƒæ‹¥æœ‰çš„é»˜è®¤çº¿ç¨‹æ•°é‡ç­‰äºè¿è¡Œè®¡ç®—æœºä¸Šçš„å¤„ç†å™¨æ•°é‡ï¼Œæ‰€ä»¥è¿™é‡Œå°±å‡ºç° äº†è¿™ä¸ªjavaè¿›ç¨‹é‡Œæ‰€æœ‰ä½¿ç”¨parallelStreamçš„åœ°æ–¹å®é™…ä¸Šæ˜¯å…¬ç”¨çš„åŒä¸€ä¸ªForkJoinPoolã€‚parallelStreamæä¾›äº†æ›´ ç®€å•çš„å¹¶å‘æ‰§è¡Œçš„å®ç°ï¼Œä½†å¹¶ä¸æ„å‘³ç€æ›´é«˜çš„æ€§èƒ½ï¼Œå®ƒæ˜¯ä½¿ç”¨è¦æ ¹æ®å…·ä½“çš„åº”ç”¨åœºæ™¯ã€‚å¦‚æœcpuèµ„æºç´§å¼  parallelStreamä¸ä¼šå¸¦æ¥æ€§èƒ½æå‡ï¼›å¦‚æœå­˜åœ¨é¢‘ç¹çš„çº¿ç¨‹åˆ‡æ¢åè€Œä¼šé™ä½æ€§èƒ½ã€‚  </p>
<p><strong>Collect(æµè½¬æ¢ä¸ºå…¶ä»–æ•°æ®ç»“æ„)</strong></p>
<p>  è½¬æ¢ä¸ºlist</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;String&gt; nums = Stream.of(<span class="keyword">new</span> String[]&#123;<span class="string">"1"</span>, <span class="string">"2"</span>, <span class="string">"3"</span>, <span class="string">"4"</span>, <span class="string">"5"</span>&#125;);</span><br><span class="line">List&lt;String&gt; list = nums.collect(Collectors.toList());</span><br></pre></td></tr></table></figure>
<p>  ä¹Ÿå¯ä»¥è¿™æ ·å†™</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = nums.collect(Collectors.toCollection(ArrayList::<span class="keyword">new</span>));</span><br></pre></td></tr></table></figure>

<p>  è½¬æ¢ä¸ºå­—ç¬¦ä¸²</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String str =nums.collect(Collectors.joining());</span><br></pre></td></tr></table></figure>

<p> <strong>Stream APIæ€»ç»“</strong></p>
<ul>
<li>streamä¸æ˜¯æ•°æ®ç»“æ„ï¼Œå®ƒæ²¡æœ‰å†…éƒ¨å­˜å‚¨ï¼Œå®ƒåªæ˜¯ç”¨æ“ä½œç®¡é“ä»sourceæŠ“å–æ•°æ® </li>
<li>Streamçš„æ“ä½œä¼šäº§ç”Ÿä¸€ä¸ªæ–°Streamï¼Œè€Œä¸æ˜¯ä»sourceä¿®æ”¹åå¾—åˆ°</li>
<li>æ‰€æœ‰ Stream çš„æ“ä½œå¿…é¡»ä»¥ lambda è¡¨è¾¾å¼ä¸ºå‚æ•° </li>
<li>æƒ°æ€§åŒ–ï¼Œå¾ˆå¤š Stream æ“ä½œæ˜¯å‘åå»¶è¿Ÿçš„ï¼Œä¸€ç›´åˆ°å®ƒå¼„æ¸…æ¥šäº†æœ€åéœ€è¦å¤šå°‘æ•°æ®æ‰ä¼šå¼€å§‹ï¼Œä¸­é—´æ“ä½œæ°¸è¿œæ˜¯æƒ°æ€§åŒ–çš„ã€‚</li>
<li>å½“ä¸€ä¸ª Stream æ˜¯å¹¶è¡ŒåŒ–çš„ï¼Œå°±ä¸éœ€è¦å†å†™å¤šçº¿ç¨‹ä»£ç ï¼Œæ‰€æœ‰å¯¹å®ƒçš„æ“ä½œä¼šè‡ªåŠ¨å¹¶è¡Œè¿›è¡Œçš„ã€‚</li>
</ul>
<h4 id="Date-Time-API"><a href="#Date-Time-API" class="headerlink" title="Date Time API"></a>Date Time API</h4><p>Java 8é€šè¿‡å‘å¸ƒæ–°çš„Date-Time API (JSR 310)æ¥è¿›ä¸€æ­¥åŠ å¼ºå¯¹æ—¥æœŸä¸æ—¶é—´çš„å¤„ç†ã€‚</p>
<p><strong>java8ä¹‹å‰</strong></p>
<ul>
<li><strong>éçº¿ç¨‹å®‰å…¨</strong> java.util.Date æ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€æœ‰çš„æ—¥æœŸç±»éƒ½æ˜¯å¯å˜çš„</li>
<li><strong>è®¾è®¡å¾ˆå·®</strong> æ—¥æœŸ/æ—¶é—´ç±»çš„å®šä¹‰ä¸ä¸€è‡´ï¼Œåœ¨java.utilå’Œjava.sqlçš„åŒ…ä¸­éƒ½æœ‰æ—¥æœŸç±»ã€‚</li>
<li><strong>æ—¶åŒºå¤„ç†éº»çƒ¦</strong> æ—¥æœŸç±»å¹¶ä¸æä¾›å›½é™…åŒ–ï¼Œæ²¡æœ‰æ—¶åŒºæ”¯æŒ</li>
</ul>
<p>æ–°çš„java.timeåŒ…æ¶µç›–äº†æ‰€æœ‰å¤„ç†æ—¥æœŸï¼Œæ—¶é—´ï¼Œæ—¥æœŸ/æ—¶é—´ï¼Œæ—¶åŒºï¼Œæ—¶åˆ»ï¼ˆinstantsï¼‰ï¼Œè¿‡ç¨‹ï¼ˆduringï¼‰ä¸æ—¶é’Ÿï¼ˆclockï¼‰çš„æ“ä½œã€‚</p>
<p><strong>LocalDateç±»</strong></p>
<p>LocalDateåªæŒæœ‰ISO-8601æ ¼å¼ä¸”æ— æ—¶åŒºä¿¡æ¯çš„æ—¥æœŸéƒ¨åˆ†  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">LocalDate now = LocalDate.now(); <span class="comment">// 2020-10-08</span></span><br><span class="line">now = now.plusDays(<span class="number">2</span>);  <span class="comment">// 2020-10-10</span></span><br><span class="line">now = now.plusMonths(<span class="number">1</span>); <span class="comment">// 2020-11-10</span></span><br><span class="line">now = now.minusMonths(<span class="number">1</span>); <span class="comment">// 2020-10-10</span></span><br><span class="line">now = now.minusDays(<span class="number">2</span>); <span class="comment">// 2020-10-08</span></span><br><span class="line">LocalDate date3 = LocalDate.of(<span class="number">2020</span>, Month.DECEMBER, <span class="number">12</span>); <span class="comment">// 2020-12-12</span></span><br></pre></td></tr></table></figure>

<p>è·å–å½“å‰æ—¥æœŸï¼Œå¯¹å…¶è¿›è¡Œä¿®æ”¹</p>
<p><strong>LocalTimeç±»</strong></p>
<p>LocalTimeåªæŒæœ‰ISO-8601æ ¼å¼ä¸”æ— æ—¶åŒºä¿¡æ¯çš„æ—¶é—´éƒ¨åˆ†  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">LocalTime now = LocalTime.now(); <span class="comment">// 22:10:54.613</span></span><br><span class="line">now = now.plusMinutes(<span class="number">12</span>); <span class="comment">// 22:22:54.613</span></span><br><span class="line">now = now.minusHours(<span class="number">2</span>); <span class="comment">// 20:22:54.613</span></span><br><span class="line">System.out.println(now.format(DateTimeFormatter.ofPattern(<span class="string">"HH:mm:ss"</span>))); <span class="comment">// 20:22:54</span></span><br><span class="line">LocalTime date4 = LocalTime.of(<span class="number">22</span>, <span class="number">15</span>, <span class="number">30</span>); <span class="comment">// 20:15:30</span></span><br><span class="line">LocalTime date5 = LocalTime.parse(<span class="string">"20:15:30"</span>); <span class="comment">// 20:15:30</span></span><br></pre></td></tr></table></figure>

<p>è·å–å½“å‰æ—¶é—´ï¼Œå¯¹å…¶è¿›è¡Œä¿®æ”¹  </p>
<p><strong>LocalDateTimeç±»</strong></p>
<p>LocaleDateTimæŠŠLocaleDatä¸LocalTimeçš„åŠŸèƒ½åˆå¹¶èµ·æ¥  </p>
<p><strong>ZonedDateTimeç±»</strong></p>
<p>ä»æŒ‡å®šæ—¶åŒºçš„ç³»ç»Ÿæ—¶é’Ÿä¸­è·å–å½“å‰æ—¥æœŸæ—¶é—´ã€‚  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ZonedDateTime now = ZonedDateTime.now(ZoneId.of(<span class="string">"America/Los_Angeles"</span>));</span><br><span class="line">System.out.println(now); <span class="comment">// 2020-10-08T07:13:54.754-07:00[America/Los_Angeles]</span></span><br></pre></td></tr></table></figure>

<p>è·å–å½“å‰æ—¶åŒº</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ZoneId currentZone = ZoneId.systemDefault();</span><br><span class="line">System.out.println(<span class="string">"å½“æœŸæ—¶åŒº: "</span> + currentZone); <span class="comment">// å½“æœŸæ—¶åŒº: Asia/Shanghai</span></span><br></pre></td></tr></table></figure>

<p><strong>Clockç±»</strong></p>
<p>å®ƒé€šè¿‡æŒ‡å®šä¸€ä¸ªæ—¶åŒºï¼Œç„¶åå°±å¯ä»¥è·å–åˆ°å½“å‰çš„æ—¶åˆ»ï¼Œæ—¥æœŸä¸æ—¶é—´  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Clock shanghai = Clock.system(ZoneId.of(<span class="string">"Asia/Shanghai"</span>));</span><br><span class="line">System.out.println(LocalDateTime.now(shanghai)); <span class="comment">// 2020-10-08T22:15:39.999</span></span><br></pre></td></tr></table></figure>

<p><strong>Durationç±»</strong></p>
<p>Durationè®¡ç®—ä¸¤ä¸ªæ—¥æœŸå·®  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">LocalDateTime start = LocalDateTime.parse(<span class="string">"2020-01-01 22:10:10"</span>, DateTimeFormatter.ofPattern(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>));</span><br><span class="line">LocalDateTime end = LocalDateTime.parse(<span class="string">"2020-02-01 22:15:10"</span>, DateTimeFormatter.ofPattern(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>));</span><br><span class="line">Duration duration = Duration.between(start, end);</span><br><span class="line">System.out.println(duration.toDays()); <span class="comment">// 31</span></span><br><span class="line">System.out.println(duration.toHours()); <span class="comment">// 744</span></span><br></pre></td></tr></table></figure>
      </div>
        <div class="support-author">
          <p>æ„Ÿè°¢æ‚¨çš„é˜…è¯»ã€‚ ğŸ™
          <a href="https://zhangdepeng.github.io/index.html" target="_blank">å…³äºè½¬è½½è¯·çœ‹è¿™é‡Œ</a>
            <!--<a class="btn-pay"  href="#pay-modal">Â¥ æ‰“èµæ”¯æŒ</a>-->
          </p>
        </div>
        <!--
            <div class="like ">
              <div class="like-button">
                <a id="like-note" href="">
                  <i class="icon-heart"></i>å–œæ¬¢
                </a>
              </div>
              <span id="likes-count">256</span>
            </div>
        -->
        <div class="otherLink">
          <div class="previous">
          </div>
          <div class="next">
          </div>
        </div>
        <div class="comments" id="comments">
          

        </div>
      </div>
    </div>
   </div>
</main>
<div class="footer">
  <div class="info">
    <p>
    <a href="https://hexo.io" target="_blank" rel="noopener"> Hexo </a> å¼ºåŠ›é©±åŠ¨ |
      <a href="https://github.com/Youthink/hexo-themes-yearn" target="_blank" rel="noopener"> Yearn </a>
      ä¸»é¢˜
    </p>
    <p>&copy;2019-2020 Zhang&#39;s Blog</p>
  </div>
</div>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script>//console
  var consoleConfig = '\næ¬¢è¿è®¿é—®www.zhangdp.top,\næœ¬åšå®¢ä½¿ç”¨ %cHexo%c æ­å»ºï¼Œåšå®¢ä¸»é¢˜ä¸ºå°çŒ¿å¤§åœ£å¼€å‘çš„ %chexo-themes-yearn%c ~~~ ğŸ‰ğŸ‰ğŸ‰ \n\næºç  https://github.com/Youthink/hexo-themes-yearn'.split(',');
  var canConsole = true;
  var consoleInfo = (function(consoleConfig) {
  if (!canConsole || !consoleConfig || consoleConfig.length < 1) {
    return;
  }
  var consoleColor = '#6190e8';
  var _console;
  var backgroundTextStyle = 'padding: 1px 5px;color: #fff;background: ' + consoleColor + ';'
  var textStyle = 'color: ' + consoleColor + ';';

  consoleConfig.map(o => {
    var num = (o.match(/%c/g) || []).length;
    if(/^http(s)?:\/\//.test(o)) {
      console.log('%c     ', 'background: url(' + o + ') no-repeat left center;font-size: 180px;');
      return;
    }
    if (num > 0) {
      var logArguments = [];
      for (var i = 0; i < num; i++) {
        if (i % 2 === 0) {
          logArguments.push(backgroundTextStyle);
        } else {
          logArguments.push(textStyle);
        }
      }
      (_console = console).log.apply(_console, ['%c' + o, textStyle].concat(logArguments));
      return;
    }
    console.log('%c' + o, textStyle);
  });
}(consoleConfig));</script><script type="text/javascript" src="/./js/main.js"></script>

  <script src='https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js'></script>
  <script>
    if (window.mermaid) {
      mermaid.initialize({theme: 'forest'});
    }
  </script>



  <script src="//at.alicdn.com/t/font_159214_mvtxvg9me9.js"></script>
</body>
</html>
